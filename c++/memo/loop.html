<html>
<head>
<title>loop macro</title>
<style>

body {
  width: 660px;
  font-size: 17px;
  background-color: #ffffff;
}

time {
  text-decoration: underline;
  margin-right: 0;
  display: block;
  text-align: right;
}

code {
  font-family: Consolas, Ricty;
  display: block;
  background-color: #fffff0;
  border: 2px solid #fdfdc0;
  border-left: 10px solid #ffffa0;
  margin-left: 5px;
  margin: 10px;
}

article:before {
  content: "◇";
}

</style>
</head>
<body>
<h1>ループマクロについて</h1>

<time>2014年 11月29日 土曜日 16時43分01秒 JST</time>
<time>2015年 1月11日 日曜日 16時16分30秒 JST</time>

<article>
  <p> 現在、次の三種類をいつも定義している。
  すなわち、

  <code>#define iota(i,n,b,s) for(int i=int(b);i!=int((b)+(s)*(n));i+=(s))</code>
  <code>#define range(i,n,m) iota(i,(((n)>(m))?((n)-(m)):((m)-(n))),(n),((n)>(m)?-1:1))</code>
  <code>#define rep(i,n) iota(i,(n),0,1)</code>

  である。</p>

  <p>
  <kbd>iota</kbd>は、この中で最も汎用的であり、
  取るパラメータの数も多い。
  また、他の二つのループは見てわかるように
  <kbd>iota</kbd>に書き換えている。</p>

  <p>
  <kbd>range</kbd>は次に汎用的である。
  </p>

  <p>
  <kbd>rep</kbd>
  は、おそらくC++でプロコンをする人間なら誰でも使っていて、
  使う場面は最も多い。
  </p>

  <p>詳細を逆順に示していく。</p>
</article>

<article>
  <h2>rep</h2>
  <p><kbd>rep(i, N)</kbd> は
  <code>for (int i = 0; i < N; ++i)</code>
  に等しい。 <kbd> N &gt;= 0</kbd> を要請する。</p>
</article>

<article>
  <h2>range</h2>
  <p>
  <kbd>range(i, N, M)</kbd> は、
  Nから始まってMを含まない整数の区間 <kbd>[N, M)</kbd> の上を、
  変数<kbd>i</kbd>で走査するループ。
  </p>

  <h3>Example</h3>
  <pre><code>range (i, 1, 10) cout &lt;&lt; i &lt;&lt; ' '; cout &lt;&lt; endl;
// print "1 2 3 4 5 6 7 8 9"

range (i, 10, 10) cout &lt;&lt; i &lt;&lt; ' '; cout &lt;&lt; endl;
// print "" (empty loop)

range (i, 10, 1) cout &lt;&lt; i &lt;&lt; ' '; cout &lt;&lt; endl;
// print "10 9 8 7 6 5 4 3 2"</code></pre>

</article>

<article>
  <h2>iota</h2>
  <p>
  <kbd>iota(i, N, begin, step)</kbd>
  は、APL, J のι関数を想定して書いたものである。
  <code>for (int i = begin; i != begin + step * N; i += step)</code>
  に等しい。
  次のようにも書ける。
  <code>for (int k = 0, i; i = begin + step * k, k &lt; N; ++k)</code>
  </p>

  <h3>Example</h3>
  <pre><code>iota (i, 10, 1, 2) cout &gt;&gt; i &gt;&gt; ' '; cout &gt;&gt; endl;
// print "1 3 5 7 9 11 13 15 17 19"</code></pre>


</article>
</body>
</html>
